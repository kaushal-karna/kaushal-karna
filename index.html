<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kaushal Karn ‚Äî Portfolio</title>
  <style>
    :root {
      --bg: #0d1117;
      --muted: #8b949e;
      --text: #c9d1d9;
      --accent: #58a6ff;
      --card: rgba(1,4,9,0.6);
      --card-elev: rgba(2,6,23,0.6);
      --glass: rgba(255,255,255,0.02);
      --border: rgba(240,246,252,0.1);
    }

    /* Light theme overrides */
    :root[data-theme='light'] {
      --bg: #ffffff;
      --muted: #656d76;
      --text: #24292f;
      --accent: #0969da;
      --card: rgba(255,255,255,0.9);
      --card-elev: rgba(2,6,23,0.06);
      --glass: rgba(10,20,30,0.02);
      --border: rgba(208,215,222,0.5);
    }

    * { box-sizing: border-box; }
    /* prevent horizontal scrolling from overflow */
    html, body { overflow-x: hidden; }
    /* make images responsive and avoid overflow */
    img { max-width: 100%; height: auto; display: block; }
    body {
      margin: 0;
      font-family: Inter, 'Segoe UI', system-ui, -apple-system, 'Helvetica Neue', Arial;
      background: linear-gradient(180deg,var(--bg),color-mix(in srgb, var(--bg) 80%, transparent));
      color: var(--text);
      -webkit-font-smoothing:antialiased;
      transition: background-color 240ms ease, color 240ms ease;
    }

    .wrap { max-width:1100px; margin:30px auto; padding:24px; }
    header { display:flex; gap:20px; align-items:center; justify-content:flex-start; flex-wrap:wrap; }
    .avatar { width:120px; height:120px; border-radius:16px; overflow:hidden; flex:0 0 120px; border:2px solid rgba(255,255,255,0.04); }
    .avatar img { width:100%; height:100%; object-fit:cover; display:block; }
    h1 { margin:0; font-size:1.6rem; }
    p.lead { margin:6px 0 10px; color:var(--muted); }

    .badges { display:flex; flex-wrap:wrap; gap:8px; margin-top:8px; align-items:center; }

    /* Theme switch (inline) */
    .theme-toggle { background:transparent; border:0; padding:0; display:inline-flex; align-items:center; gap:8px; }
    .switch { width:56px; height:32px; border-radius:999px; padding:4px; display:inline-flex; align-items:center; background:color-mix(in srgb, var(--card) 30%, transparent); cursor:pointer; transition: background-color 240ms ease, transform 180ms ease; border:1px solid color-mix(in srgb, var(--card) 40%, transparent); }
    .switch .knob { width:24px; height:24px; background:var(--bg); border-radius:50%; box-shadow:0 4px 12px rgba(2,6,23,0.35); transform: translateX(0); transition: transform 320ms cubic-bezier(.2,.9,.3,1), background 240ms ease; display:inline-block; }
    .switch.on { background: color-mix(in srgb, var(--accent) 18%, transparent); }
    .switch.on .knob { transform: translateX(24px); background: white; }
    .theme-icon { display:inline-block; width:18px; height:18px; font-size:14px; transition: transform 320ms ease; }

    main { display:grid; grid-template-columns: 1fr 340px; gap:28px; margin-top:28px; align-items:start; }

    .card { background: var(--card); padding:18px; border-radius:12px; border: 1px solid var(--border); box-shadow: 0 6px 24px var(--card-elev); transition: transform 160ms ease, box-shadow 200ms ease, background-color 240ms ease; }

    .skills { display:flex; flex-wrap:wrap; gap:8px; margin-top:8px; }
    .skill { background:color-mix(in srgb, var(--card) 26%, transparent); color:var(--muted); padding:6px 10px; border-radius:999px; font-size:0.85rem; }

    .tech { display:inline-block; background:color-mix(in srgb, var(--accent) 12%, transparent); color:var(--text); padding:4px 8px; border-radius:8px; font-size:0.78rem; margin-right:6px; }

    .projects { display:grid; gap:12px; }
    .project { display:flex; gap:12px; padding:12px; border-radius:10px; background:var(--card); text-decoration:none; color:inherit; align-items:center; transition: transform 140ms ease, box-shadow 180ms ease; }
    .project:hover { transform: translateY(-6px); box-shadow: 0 10px 30px rgba(2,6,23,0.25); }
    .project img { width:96px; height:64px; object-fit:cover; border-radius:8px; flex:0 0 96px; }
    .project h3 { margin:0 0 6px 0; font-size:1rem; }
    .project p { margin:0; color:var(--muted); font-size:0.92rem; }

    aside .card img { max-width:100%; border-radius:8px; display:block; }

    footer { text-align:center; margin:28px 0 6px; color:var(--muted); font-size:0.95rem; }

    /* Responsive rules */
    @media (max-width:1100px) {
      .wrap{padding:18px}
    }

    @media (max-width:880px) {
      main { grid-template-columns: 1fr; }
      header { align-items:flex-start; }
      .avatar{width:96px;height:96px;flex:0 0 96px}
      .badges { gap:6px; }
      .project { flex-direction:column; align-items:stretch; }
      .project img { width:100%; height:160px; flex:unset; }
      h1 { font-size:1.25rem; }
      p.lead { font-size:0.95rem }
      aside .card img { max-width:100%; height:auto }
    }

    @media (max-width:480px){
      .wrap{margin:12px}
      .card{padding:14px}
      header{gap:12px}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="avatar card" id="avatar">
        <!-- avatar image injected -->
      </div>
      <div>
        <h1 id="name">Loading‚Ä¶</h1>
        <p class="lead" id="bio">Using a lightweight data file for content.</p>
        <div class="badges" id="links"></div>
        <button id="theme-toggle" class="theme-toggle" aria-pressed="false" aria-label="Toggle theme">
          <span id="theme-icon" class="theme-icon">üåô</span>
          <span class="switch" id="theme-switch" role="switch" aria-checked="false">
            <span class="knob" aria-hidden="true"></span>
          </span>
        </button>
      </div>
    </header>

    <main>
      <section>
        <div class="card">
          <h2>About</h2>
          <p id="about">Fetching profile...</p>
          <div class="skills" id="skills"></div>
        </div>

        <div style="height:18px"></div>

        <div class="card">
          <h2>Projects</h2>
          <div class="projects" id="projects">Loading projects‚Ä¶</div>
        </div>
      </section>

      <aside>
        <div class="card">
          <h3>GitHub</h3>
          <p style="color:var(--muted); margin-bottom:12px">Live stats and top languages</p>
          <img id="gh-stats" src="" alt="GitHub stats" style="max-width:100%;" />
          <div style="height:8px"></div>
          <img id="gh-toplangs" src="" alt="Top languages" style="max-width:100%;" />
        </div>

        <div style="height:12px"></div>

        <div class="card">
          <h3>Contact</h3>
          <p style="color:var(--muted);">Email, website and social links</p>
          <div id="contact-links" style="margin-top:8px"></div>
        </div>
      </aside>
    </main>

    <footer>Made with ‚ù§Ô∏è by Kaushal Karna. All rights reserved 2026.</footer>
  </div>

  <script>
    async function loadData(){
      try{
        const [pRes, projRes] = await Promise.all([
          fetch('data/profile.json'),
          fetch('data/projects.json')
        ]);
        const profile = await pRes.json();
        const projects = await projRes.json();

        document.getElementById('name').textContent = profile.name;
        document.getElementById('bio').textContent = profile.bio;
        document.getElementById('about').textContent = profile.bio + ' Based in ' + (profile.location||'') + '.';

        // avatar with fallback to local asset
        const avatarEl = document.getElementById('avatar');
        const img = document.createElement('img');
        img.alt = profile.name + ' avatar';
        img.src = `https://github.com/${profile.username}.png`;
        img.onerror = () => { img.onerror = null; img.src = 'data/avatar.svg'; };
        avatarEl.appendChild(img);

        // skills
        const skillsEl = document.getElementById('skills');
        (profile.skills||[]).forEach(s=>{
          const span = document.createElement('span');
          span.className='skill'; span.textContent=s; skillsEl.appendChild(span);
        });

        // links / badges
        const links = document.getElementById('links');
        const resume = document.createElement('a');
        resume.href = profile.resume; resume.target='_blank';
        resume.innerHTML = '<img src="https://img.shields.io/badge/Resume-View-blueviolet?style=for-the-badge" alt="Resume">';
        links.appendChild(resume);

        const website = document.createElement('a'); website.href=profile.website; website.target='_blank'; website.innerHTML='<img src="https://img.shields.io/badge/Website-Visit-blue?style=for-the-badge" alt="Website">'; links.appendChild(website);

        // contact links
        const contact = document.getElementById('contact-links');
        contact.innerHTML = `
          <div style="display:flex;flex-direction:column;gap:6px">
            <a href="mailto:${profile.email}">${profile.email}</a>
            <a href="${profile.website}" target="_blank">${profile.website}</a>
            <a href="${profile.social.github}" target="_blank" style="display:flex;align-items:center;gap:8px;"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg> GitHub</a>
            <a href="${profile.social.twitter}" target="_blank" style="display:flex;align-items:center;gap:8px;"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg> X / Twitter</a>
            <a href="${profile.social.youtube}" target="_blank" style="display:flex;align-items:center;gap:8px;"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg> YouTube</a>
          </div>`;

        // projects
        const projectsEl = document.getElementById('projects'); projectsEl.innerHTML='';
        (projects||[]).forEach(p=>{
          const a = document.createElement('a'); a.className='project'; a.href = p.url; a.target='_blank';
          const thumb = p.thumb || 'data/project-1.svg';
          // tech tags
          const techHtml = (p.tech||[]).map(t=>`<span class="tech">${t}</span>`).join(' ');
          a.innerHTML = `
            <img src="${thumb}" onerror="this.onerror=null;this.src='data/project-1.svg'" alt="${p.title} thumbnail" />
            <div style="flex:1; min-width:0">
              <h3 style="margin-bottom:6px">${p.title}</h3>
              <p style="margin:0 0 8px;color:var(--muted);font-size:0.95rem">${p.description}</p>
              <div>${techHtml}</div>
            </div>`;
          projectsEl.appendChild(a);
        });

        // github stats
        const ghStats = document.getElementById('gh-stats');
        ghStats.src = `https://github-readme-stats.vercel.app/api?username=${profile.username}&show_icons=true&theme=transparent`;
        const ghTop = document.getElementById('gh-toplangs');
        ghTop.src = `https://github-readme-stats.vercel.app/api/top-langs/?username=${profile.username}&layout=compact&theme=transparent&hide_border=true`;

        // theme init: prefer saved, otherwise system preference
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const themeSwitch = document.getElementById('theme-switch');
        function applyTheme(t){
          document.documentElement.setAttribute('data-theme', t);
          const isDark = t === 'dark';
          themeToggle.setAttribute('aria-pressed', String(!isDark));
          themeSwitch.setAttribute('aria-checked', String(!isDark));
          themeIcon.textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
          if(!isDark) themeSwitch.classList.add('on'); else themeSwitch.classList.remove('on');
        }
        const saved = localStorage.getItem('theme');
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        const startTheme = saved || (prefersDark ? 'dark' : 'light');
        applyTheme(startTheme);

        // clicking toggle toggles theme and animates icon
        themeToggle.addEventListener('click', ()=>{
          const current = document.documentElement.getAttribute('data-theme') || 'dark';
          const next = current === 'dark' ? 'light' : 'dark';
          applyTheme(next);
          localStorage.setItem('theme', next);
          themeIcon.style.transform = 'rotate(360deg) scale(1.08)';
          setTimeout(()=> themeIcon.style.transform = '', 520);
        });

      }catch(err){
        document.getElementById('about').textContent = 'Could not load local data. Check data/profile.json and data/projects.json.';
        console.error(err);
      }
    }
    loadData();
  </script>
</body>

</html>